<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="com.example.mapper.NoticeTestMapper">
	
	<select id="noticeSelectList" resultType="com.example.dto.NTSelectListVO">
		
			SELECT
				idx
				,labelType
				,title
				,startDt
				,endDt   
				,reg_user 
				,reg_dt  AS regDt
				,reg_tm AS regTm
			FROM 
			NB_TEST 	
				where 1=1
				and status='y'
			    ORDER BY IDX DESC

		
	</select>
	
	<select id="noticeSelectOne" resultType="com.example.dto.NTSelectOneVO">
		
		SELECT
				idx
				,labelType
				,title
				,contents 
				,startDt
				,endDt 
				,reg_user 
				,reg_dt 
				,reg_tm 
			FROM 
			NB_TEST 
			where 1=1	
			AND idx = #{idx}
			ORDER BY IDX DESC
			
	</select>	
	
	<insert id="insertOne" parameterType="com.example.dto.NTInsertVO">
    <![CDATA[
    	INSERT INTO NB_TEST(
			 title
			,contents  
			,status
			,labelType
			,importance
			,startDt 
			,start_tm 
			,endDt 
			,reg_user 
			,end_tm 
			,reg_dt
			,reg_tm 
		)VALUES
		(
			#{title}
			,#{contents}
			,'y'
			,#{labelType}
			,'H'
			,#{startDt}
			,'000000'
			,#{endDt}
			,#{reg_user}
			,'000000'
			,TO_CHAR(SYSDATE, 'YYYYMMDD')
			,TO_CHAR(SYSDATE, 'HH24MISS')
		)
		 ]]>
    </insert>
	
	<update id="updateOne" parameterType="com.example.dto.NTUpdateVO">
    <![CDATA[
    	UPDATE 
    		NB_TEST
    	SET
    		 title =  #{title}
			,contents = #{contents}
    		,labelType = #{labelType}
			,startDt = #{startDt}
			,endDt = #{endDt}
    		,udt_dt = TO_CHAR(SYSDATE, 'YYYYMMDD')
			,udt_tm = TO_CHAR(SYSDATE, 'HH24MISS')		
    	where 1=1
    	and idx = #{idx}
    ]]>
    </update>
	
	<update id="deleteOne" parameterType="com.example.dto.NTDeleteVO">
    <![CDATA[
    	UPDATE 
    		NB_TEST
    	SET
    		STATUS = 'n'
    		,udt_dt = TO_CHAR(SYSDATE, 'YYYYMMDD')
			,udt_tm = TO_CHAR(SYSDATE, 'HH24MISS')	
    	WHERE 1=1
    	AND IDX = ${idx}
    	
    ]]>
    </update>
</mapper>